#!/depot/perl-5.14.2/bin/perl -w
use strict;
use warnings;
use Getopt::Std;
use Data::Dumper;
use FindBin qw($RealBin $RealScript);
use File::Spec::Functions qw( catfile );
use Cwd qw( abs_path );
use Carp qw(cluck confess croak);
#use Test2::Tools::Compare;
use Test2::Bundle::More;

use lib "$RealBin/../lib";
use lib "$RealBin/../../lib/perl";
use Util::CommonHeader;
use Util::Misc;
use Util::Messaging;
use Util::DS;
use Util::P4;

use ibis;

our $PROGRAM_NAME = $0;
our $AUTHOR_NAME  = 'Haashim Shahzada';
#----------------------------------#
our $DEBUG     = NONE;
our $VERBOSITY = NONE;
our $DEBUG_LOG = undef;
#----------------------------------#


Main();

########  YOUR CODE goes in Main  ##############
sub Main {
    utils__process_cmd_line_args();
    # Current planned test count
    plan(7);
    #-------------------------------------------------------------------------
    #  Test 'append_arrays'
    #-------------------------------------------------------------------------
    setup_tests__verify();
    #-------------------------------------------------------------------------
    #
    done_testing();
    exit(0);
}
############    END Main    ####################

#-------------------------------------------------------------------------
#  Setup tests to exercise the verify subroutine
#-------------------------------------------------------------------------
sub setup_tests__verify() {
    my $subname = 'verify';    

    #-------------------------------------------------------------------------
    #  Test 'verify'
    #-------------------------------------------------------------------------
    my %test0 = (
        'thresh'      => 10, 
        'theoretical' => 40,
        'actual'      => 42,      
        'expect'      => [1]
    );

    my %test1 = (
        'thresh'      => 5, 
        'theoretical' => 38,
        'actual'      => 39,      
        'expect'      => [1]
    );

    my %test2 = (
        'thresh'      => 4, 
        'theoretical' => 35,
        'actual'      => 45,      
        'expect'      => [0]
    );

    my %test3 = (
        'thresh'      => "abc", 
        'theoretical' => 4,
        'actual'      => 5,      
        'expect' => [-1]
    );
    
    my %test4 = (
        'thresh'      => -1, 
        'theoretical' => 4,
        'actual'      => 5,      
        'expect' => [0]
    );

    my %test5 = (
        'theoretical' => 4,
        'actual'      => 5,      
        'expect'      => [-1]
    );

    my %test6 = (
        'thresh'      => -40,
        'theoretical' => 4,
        'actual'      => 5,      
        'expect'      => [0]
    );

    my @tests_nullval = (\%test0, \%test1, \%test2, \%test3, \%test4, \%test5, \%test6);
    foreach my $cnt (@tests_nullval) {

        my %testcase = %{$cnt};
        my @out      = &verify( $testcase{thresh}, $testcase{theoretical}, $testcase{actual} );        
        is_deeply (\@out, $testcase{expect}, $subname);

    }  

}

1;
