#!/depot/tcl8.6.3/bin/tclsh8.6
##!/depot/tk8.6.1/bin/wish
# nolint Main
# nolint utils__script_usage_statistics
#
package require tcltest 2.0
namespace import -force ::tcltest::*

package require try         ;# Tcllib.
package require cmdline 1.5 ;# First version with proper error-codes.
package require fileutil

set DEBUG      0
set VERBOSITY  0
set STDOUT_LOG ""
set AUTHOR     "Ahmed Hesham"
set RealBin [file dirname [file normalize [info script]] ]
set RealScript [file tail [file normalize [info script]] ]

# source the SUT (script under test) to load in all of it's procs
# Setting global DDR_DA_UNIT_TEST so the script we are sourcing won't actually
# run the script; it should return before anything actually runs.
set DDR_DA_UNIT_TEST 1
source $RealBin/../../bin/alphaBuildMacroRelease.tcl

::tcltest::verbose bpse
::tcltest::debug 2


#######################################################################
# Create your tests here
#######################################################################

test alphaBuildMacroRelease-doClean_t01 { Test: main } \
    -body { 
        set dir [makeDirectory doCleanDir]
        set file [makeFile {doClean_t01} doCleanFile $dir]
        set ::ipReleaseName $dir

        doClean main

        removeDirectory $dir
    } \
    -result {} \
    -output "Info:  Deleting [pwd]/doCleanDir/doCleanFile\n\n"

test alphaBuildMacroRelease-doClean_t02 { Test: hspice } \
    -body { 
        set dir [makeDirectory doCleanDir_hspice]
        set file [makeFile {doClean_t01} doCleanFile $dir]
        set ::ipReleaseName [regsub {_hspice$} $dir ""]

        doClean hspice

        removeDirectory $dir
    } \
    -result {} \
    -output "Info:  Deleting [pwd]/doCleanDir_hspice/doCleanFile\n\n"

cleanupTests

puts "Done"

