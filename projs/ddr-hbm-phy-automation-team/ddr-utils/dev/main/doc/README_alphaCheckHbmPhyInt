This directory contains a program built to check the bumpout of an HBM phy vs. the bumps on its interposer.

Usage:
    /remote/cad-rep/projects/alpha/alpha_common/bin/alphaCheckHbmPhyInt/alphaCheckHbmPhyInt \
    --phyGds <phyGdsFile> \
    --intGds <intGds> \
    --phyPinTextLayer <pohyPinTextLayer> \
    --intPinTextLayer <intPinTextLayer> \
    --phyCell <phjyCell> \
    --intCell <intCell> \
    --phyOrientation <phyOrientation> \
    --phyOrigin <phyOrigin> \
    --pinMapfile <pinMapFile> \
    --phyBoundaryLayer <phyBoundaryLayer> \
    --phyUnconnOkFile <phyUnconnectedOkCsvFile> \
    --damnCloseOkFile <damnCloseOkCsvFile> \
    --mapPrefix <prefix>
    --outFileRoot <output-file-root-name>
    --help

All command arguments are required except --help.

Functional Description:
The purpose of this program is to check the bump connectivity between an hbm phy and its
associated interposer.  It operates entirely based on the top-level text in each (phy and
interposer), as top-level geometries aren't always available and to traverse the layout
hierarchies seeking out usable geometries is more complex than I currently have time for.
Connectivity is established by looking within a fixed window around the PHY texts (hardcoded
as +/-5.0u) for corresponding texts in the interposer. (Could easily be added as a command
arg if desired).

Note that string matches are case-insensitive.

Outputs:
	<outFileRoot>.bumpcheck.log     Run log file; duplicate of what's printed to stdout
	<outFileRoot>.damnClose.txt     Listing of unwaived very-close bump matches
	<outFileRoot>.exact.txt         Listing of exact bump matches
	<outFileRoot>.matched.txt       Listing of all matched bumps
	<outFileRoot>.notClose.txt      Listing of coarsely (with 5u) matched bumps
	<outFileRoot>.unmatched.txt     Listing of unwaived unmatched phy bumps.


Arguments:
	phyGds:  The gds file containing the phy.  Must be uncompressed.
	intGds:  The gds file containing the interposer.  Must be uncompressed.
	phyPinTextLayer:  The layer;purpose spec for the pin text in the phy. Of the format
			  "layer;datatype".  Example "202;74"
	intPinTextLayer:  The layer;purpose spec for the pin text in the interposer.
			  Of the format "layer;datatype".  Example "125;0"
	phyCell:  Name of the top-level phy cell.
	intCell;  Name of the top-level interposer cell.
	phyOrientation:  Orientation spec for the phy.  Specifically, how the phy is flipped
			 to line up with the interposer.  Any of MX, MY, R0 or R180.
			 MX: indicates than the phy is flipped in the Y direction, 
			 MY: indicates than the phy is flipped in the X direction, 
			 R0:  No rotation or mirroring
			 R180:  180 rotation, flipping the sign of both X and Y coords.
	phyOrigin:  Location of the phy instance in interposer coordinate space.
	pinMapfile: Map file that specifies the mapping between bump names in the phy and
		    interposer.  If no mapping is specified, match is assumed to be exact.
	phyBoundaryLayer:  The layer that marks the extent of the phy. Limitation: Only simple
			   rectangles allowed.
	phyUnconnOkFile:  A csv file listing the phy bumps, "name,x,y", that are OK to be
			  unconnected.  x,y should be in microns, in phy coordinate space.
			  Coordinate matching is exact; comments (#...) are allowed
	damnCloseOkFile:  A csv file listing the phy bumps, "name,x,y", that are OK to be
			  very close (withing 1gds unit) of the interposer bump label.
			  x,y should be in microns, in phy coordinate space.
			  Coordinate matching is exact; comments (#...) are allowed
	mapPrefix:        Alternative method of mapping phy pin to interposer pin.
			  If no mapFile mapping exists, and prefix is specified,
			  the mapped name is the phy pin name prefixed.
        outFileRoot:      Root name for all output files.  Defaults to phyCell_VS_intCell

What it checks:
     1. Matching between phy and interposer bump names, as defined in the mapfile.
     2. More than one text within the matching window, both in the phy and interposer.
     3. More than one phy boundary polygon. (Exact duplicates are allowed, any others
     	result in an abort.)
     4. Unconnected phy bumps.
     5. Unconnected interposer bumps within phy footprint, as defined by the phyBoundaryLayer.

See example run and map files in:
Disk: /remote/cad-rep/projects/alpha/alpha_common/bin/alphaCheckHbmPhyInt/
P4:   //wwcad/msip/projects/alpha/alpha_common/bin/alphaCheckHbmPhyInt/
